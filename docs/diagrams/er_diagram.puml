@startuml er_diagram

entity "Книги" as Book {
  * book_id : INTEGER <<PK>>
  --
  title : TEXT
  author : TEXT
  isbn : TEXT
  year : INTEGER
  publisher : TEXT
  category : TEXT
}

entity "Экземпляры" as Copy {
  * copy_id : INTEGER <<PK>>
  * book_id : INTEGER <<FK>>
  --
  barcode : TEXT
  status : TEXT
  condition : TEXT
}

entity "Читатели" as Reader {
  * reader_id : INTEGER <<PK>>
  --
  name : TEXT
  card_number : TEXT
  contact : TEXT
  status : TEXT
}

entity "Выдачи" as Loan {
  * loan_id : INTEGER <<PK>>
  * copy_id : INTEGER <<FK>>
  * reader_id : INTEGER <<FK>>
  --
  issue_date : TEXT
  due_date : TEXT
  return_date : TEXT
  status : TEXT
}

entity "Бронирования" as Reservation {
  * reservation_id : INTEGER <<PK>>
  * book_id : INTEGER <<FK>>
  * reader_id : INTEGER <<FK>>
  --
  reservation_date : TEXT
  status : TEXT
}

entity "Штрафы" as Fine {
  * fine_id : INTEGER <<PK>>
  * reader_id : INTEGER <<FK>>
  --
  amount : REAL
  reason : TEXT
  status : TEXT
}

' Связи между сущностями
Book ||..o{ Copy : "имеет"
Copy ||..o{ Loan : "выдан_в"
Reader ||..o{ Loan : "берет"
Reader ||..o{ Reservation : "создает"
Book ||..o{ Reservation : "бронируется_в"
Reader ||..o{ Fine : "имеет"

@enduml